name = "relay-social"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Queue consumer (runs the scheduler)
[[unsafe.bindings]]
name = "SCHEDULER_QUEUE"
queue_name = "relay-social-scheduler"
type = "queue-consumer"

[env.production]
vars = { ENVIRONMENT = "production" }

[[queues.producers]]
binding = "SCHEDULER_QUEUE"
queue_name = "relay-social-scheduler"

[[d1_databases]]
binding = "DB"
database_name = "relay-social"
database_id = "your-d1-database-id"

[vars]
NEXT_PUBLIC_APP_URL = "https://relay-social.yourname.workers.dev"
