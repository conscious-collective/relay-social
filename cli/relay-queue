#!/usr/bin/env bash
# View scheduled posts

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
source "$SCRIPT_DIR/helpers.sh"

RESPONSE=$(relay_api GET "/api/posts?status=scheduled")

COUNT=$(echo "$RESPONSE" | jq '.count')

if [[ "$COUNT" -eq 0 ]]; then
  echo "No scheduled posts"
  exit 0
fi

echo "ðŸ“… Scheduled posts ($COUNT):"
echo ""

echo "$RESPONSE" | jq -r '.posts[] | 
  "\(.id) | \(.scheduledAt) | \(.accountId) | \(.content[0:50])..."
'
